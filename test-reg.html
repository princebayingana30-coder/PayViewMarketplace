<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Registration</title>
</head>
<body>
    <h1>Test Registration</h1>
    <form id="registerForm">
        <div>
            <label for="regName">Full Name</label>
            <input type="text" id="regName" required>
        </div>
        <div>
            <label for="regEmail">Email</label>
            <input type="email" id="regEmail" required>
        </div>
        <div>
            <label for="regPhone">Phone</label>
            <input type="tel" id="regPhone" required>
        </div>
        <div>
            <label for="regPassword">Password</label>
            <input type="password" id="regPassword" required minlength="6">
        </div>
        <div>
            <label for="regConfirmPassword">Confirm Password</label>
            <input type="password" id="regConfirmPassword" required>
        </div>
        <div>
            <label>
                <input type="checkbox" id="regTerms" required>
                I agree to terms
            </label>
        </div>
        <button type="submit">Register</button>
    </form>

    <div id="result"></div>

    <script>
        // Simple notification function
        function showNotification(message, type = 'success') {
            const result = document.getElementById('result');
            result.innerHTML = `<div style="color: ${type === 'error' ? 'red' : 'green'}">${message}</div>`;
        }

        // Initialize storage
        function initializeStorage() {
            if (!localStorage.getItem('users')) {
                localStorage.setItem('users', JSON.stringify([]));
            }
            if (!localStorage.getItem('currentUser')) {
                localStorage.setItem('currentUser', JSON.stringify(null));
            }
        }

        // Register function
        function register(userData) {
            const users = JSON.parse(localStorage.getItem('users'));

            if (users.find(u => u.email === userData.email)) {
                return { success: false, message: 'Email already registered' };
            }

            if (userData.password !== userData.confirmPassword) {
                return { success: false, message: 'Passwords do not match' };
            }

            const newUser = {
                id: Date.now(),
                name: userData.name,
                email: userData.email,
                phone: userData.phone,
                password: userData.password,
                createdAt: new Date().toISOString()
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(newUser));

            return { success: true, user: newUser };
        }

        // Form handler
        document.getElementById('registerForm').addEventListener('submit', (e) => {
            e.preventDefault();

            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const phone = document.getElementById('regPhone').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const terms = document.getElementById('regTerms').checked;

            if (!terms) {
                showNotification('You must agree to the terms and conditions', 'error');
                return;
            }

            const result = register({ name, email, phone, password, confirmPassword });
            if (result.success) {
                showNotification('Registration successful! User: ' + JSON.stringify(result.user, null, 2));
            } else {
                showNotification(result.message || 'Registration failed', 'error');
            }
        });

        // Initialize
        initializeStorage();
    </script>
</body>
</html>